search:
  database:
    user: gramene_web
    password: gram3n3
    host: cabot

  page_size: 10

  index_path: search-index

  reusable_schemas: "diversity,pathway,amigo,ontology"

  tables_to_index:

    "diversity_*": "div_passport+div_synonym,div_taxonomy,div_stock;div_taxonomy;div_experiment;div_obs_unit_sample[name:producer];div_obs_unit[name];div_trait_uom[local_trait_name];div_stock[seed_lot:stock_source];div_taxonomy;cdv_source;div_poly_type;div_scoring_tech_type;cdv_marker[name]"

    "compara": "member[stable_id:description]"

    "ensembl_*": "gene[biotype:description:stable_id]+transcripts[stable_id],seq_region[name]"

    "genes": "gene_gene[accession:symbol:name:description:public_curation_comment]+gene_gene_synonyms[synonym_name],species[common_name:genus:species]"

    "maps": "feature[description]+feature_type[feature_type],species[species:common_name:gramene_taxonomy_id],feature_synonyms[feature_name];feature_type;map_set+species,map_type;library+species"

    "ontology": "term[name:term_accession]+term_definition[definition],term_type[term_type],term_synonyms[term_synonym]"

    "protein": "gene_product[gene_product_full_name]+species[ncbi_taxa_id:common_name:genus:species],gene_product_synonyms[gene_product_synonym_symbol],gene_product_helper[swissprot_acc:swissprot_id:gene_product_name:gene_product_gene_name:organism],gene_product_comment[public_comment]"

    "qtl": "qtl[qtl_accession_id:published_symbol:comments]+qtl_trait[trait_symbol:trait_name:to_accession],qtl_trait.qtl_trait_synonym[trait_synonym],qtl_trait.qtl_trait_category[trait_category:to_accession],species[species:common_name:gramene_taxonomy_id:ncbi_taxonomy_id]"

  list_columns:

    diversity_*.cdv_marker: name

    diversity_*.div_passport: accename,accenumb,div_synonyms.synonym,cdv_source_id.source

    diversity_*.div_experiment: name,design,originator,comments

    ensembl_*.dna_align_feature: hit_name,analysis.logic_name

    ensembl_*.interpro: id_field,interpro_ac[sprintf('Interpro accession &quot;%s&quot; in domain &quot;%s&quot;')]

    ensembl_*.marker: type,display_marker_synonym.name

    ensembl_*.seq_region: name

    ensembl_*.gene: biotype,display_xref.display_label,stable_id,description[sprintf('%s gene &quot;%s&quot; [%s]: %s')]

    literature.reference: authors.contributor.contributor_name,title,source.source_name,year,volume,start_page,end_page[sprintf('%s, &quot;%s&quot;, <u>%s</u>, %s, vol. %s, pp. %s-%s')]

    germplasm.germplasm: species.name,germplasm_acc

    maps.map_set: species.species,map_type.map_type,map_set_name

    maps.feature: species.species,feature_type.feature_type,display_synonym.feature_name

    maps.marker_type: marker_type,description

    maps.germplasm: species.species,germplasm_name,description

    maps.library: species.species,library_name,center_name,center_project

    ontology.term: term_type.term_type,term_name,term_accession

    pathway_*.pathway_gramene_search: gene_name,enzyme_name,reaction_id,reaction_name,ec,pathway_id,pathway_name

    protein.gene_product: gene_product_to_cultivars.cultivar.species.genus,gene_product_to_cultivars.cultivar.species.species,gene_product_helpers.swissprot_acc,gene_product_full_name[sprintf('%s %s protein &quot;%s&quot;: %s')]

    qtl.qtl: species.species,qtl_accession_id,published_symbol,qtl_trait.qtl_trait_category.trait_category,qtl_trait.trait_symbol,qtl_trait.trait_name,qtl_trait.to_accession

  sql_to_index:
    gene.gene_gene: |
      select o.term_accession
      from   gene_ontology_association o
      where  o.object_id=?
      and    o.object_table='gene';

      select g.accession, g.wild_type, s.common_name, s.genus, s.species
      from   gene_object_to_germplasm o, gene_species s, gene_germplasm g
      where  o.object_table='gene'
      and    o.object_id=?
      and    o.germplasm_id=g.germplasm_id
      and    g.species_id=s.species_id;

      select a.accession, a.symbol, a.name, a.description, 
             a.allele_interaction_description, a.public_curation_comment
      from   gene_gene_to_allele g2a, gene_allele a
      where  g2a.gene_id=?
      and    g2a.allele_id=a.allele_id;

    literature.reference: |
      select x.xref_value a
      from   xref x, xref_type xt
      where  x.record_id=?
      and    x.xref_type_id=xt.xref_type_id
      and    xt.xref_type='gramene.ontology';

    ensembl_*.gene: |
      select x.dbprimary_acc, x.display_label, x.description, 
             e.db_name, e.db_display_name
      from   xref x, object_xref ox, gene g, external_db e
      where  x.xref_id=ox.xref_id
      and    x.external_db_id=e.external_db_id
      and    ox.ensembl_id=g.gene_id
      and    g.gene_id=?
      and    ox.ensembl_object_type='Gene';

      select x.dbprimary_acc, x.display_label, x.description, 
             e.db_name, e.db_display_name
      from   xref x, object_xref ox, transcript t, gene g, external_db e
      where  x.xref_id=ox.xref_id
      and    x.external_db_id=e.external_db_id
      and    ox.ensembl_id=t.transcript_id
      and    t.gene_id=g.gene_id
      and    g.gene_id=?
      and    ox.ensembl_object_type='Transcript';

      select x.dbprimary_acc, x.display_label, x.description, 
             e.db_name, e.db_display_name
      from   xref x, object_xref ox, translation p, transcript t, 
             gene g, external_db e
      where  x.xref_id=ox.xref_id
      and    x.external_db_id=e.external_db_id
      and    ox.ensembl_id=p.translation_id
      and    p.transcript_id=t.transcript_id
      and    t.gene_id=g.gene_id
      and    g.gene_id=?
      and    ox.ensembl_object_type='Translation';

      select  distinct x.dbprimary_acc
      from    xref x, interpro i, protein_feature pf, translation p, 
              transcript t, gene g
      where   g.gene_id=?
      and     g.gene_id=t.gene_id
      and     t.transcript_id=p.transcript_id
      and     p.translation_id=pf.translation_id
      and     pf.hit_name=i.id
      and     i.interpro_ac=x.dbprimary_acc;

      select meta_value as ncbi_taxonomy_id
      from   meta 
      where  meta_key='species.taxonomy_id';

    pathway_arabidopsis.pathway_gramene_search: |
      select 'GR_tax:014503' as ontology_acc;

    pathway_rice.pathway_gramene_search: |
      select 'GR_tax:013684' as ontology_acc;

    pathway_capsicum_anuum.pathway_gramene_search: |
      select 'GR_tax:018116' as ontology_acc;

    pathway_coffea_canephora.pathway_gramene_search: |
      select 'GR_tax:052003' as ontology_acc;

    pathway_medicago_truncatula.pathway_gramene_search: |
      select 'GR_tax:018106' as ontology_acc;

    pathway_solanum_lycopersicum.pathway_gramene_search: |
      select 'GR_tax:018113' as ontology_acc;

    pathway_solanum_tuberosum.pathway_gramene_search: |
      select 'GR_tax:018114' as ontology_acc;

    pathway_sorghum_bicolor.pathway_gramene_search: |
      select 'GR_tax:014159' as ontology_acc;

    pathway_maize.pathway_gramene_search: |
      select 'GR_tax:014450' as ontology_acc;

    pathway_brachypodium.pathway_gramene_search: |
      select 'GR_tax:012596' as ontology_acc;

    pathway_poplar.pathway_gramene_search: |
      select 'GR_tax:018122' as ontology_acc;

    protein.gene_product: |
      select distinct d.xref_key
      from   objectxref o, dbxref d
      where  d.dbxref_id=o.dbxref_id
      and    o.row_id=?
      and    o.table_name='gramene.protein'
      and    d.xref_dbname not in 
           ('gramene.literature', 'gramene.ontology.taxonomy', 'gramene.gene');

      select distinct xref_key as gramene_taxonomy_id
      from   objectxref ox, dbxref dx
      where  ox.dbxref_id=dx.dbxref_id
      and    row_id=?
      and    table_name='gramene.protein'
      and    xref_dbname='gramene.ontology.taxonomy';

      select k.keyword
      from   keyword k, gene_product_to_keyword g
      where  k.keyword_id=g.keyword_id
      and    g.gene_product_id=?

  search_dbs:
    - grm_search_diversity_arabidopsis
    - grm_search_ensembl_arabidopsis_lyrata
    - grm_search_ensembl_arabidopsis_thaliana
    - grm_search_ensembl_brachypodium_distachyon
    - grm_search_ensembl_brassica_rapa
    - grm_search_ensembl_chlamydomonas_reinhardtii
    - grm_search_ensembl_cyanidioschyzon_merolae
    - grm_search_ensembl_glycine_max
    - grm_search_ensembl_hordeum_vulgare
    - grm_search_ensembl_leersia_perrieri
    - grm_search_ensembl_medicago_truncatula
    - grm_search_ensembl_musa_acuminata
    - grm_search_ensembl_oryza_barthii
    - grm_search_ensembl_oryza_brachyantha
    - grm_search_ensembl_oryza_glaberrima
    - grm_search_ensembl_oryza_glumaepatula
    - grm_search_ensembl_oryza_granulata
    - grm_search_ensembl_oryza_longistaminata
    - grm_search_ensembl_oryza_meridionalis
    - grm_search_ensembl_oryza_minutabb
    - grm_search_ensembl_oryza_minutacc
    - grm_search_ensembl_oryza_nivara
    - grm_search_ensembl_oryza_officinalis
    - grm_search_ensembl_oryza_punctata
    - grm_search_ensembl_oryza_rufipogon3s
    - grm_search_ensembl_oryza_rufipogon_fpc
    - grm_search_ensembl_oryza_sativa_indica
    - grm_search_ensembl_oryza_sativa_japonica
    - grm_search_ensembl_physcomitrella_patens
    - grm_search_ensembl_populus_trichocarpa
    - grm_search_ensembl_selaginella_moellendorffii
    - grm_search_ensembl_setaria_italica
    - grm_search_ensembl_solanum_lycopersicum
    - grm_search_ensembl_solanum_tuberosum
    - grm_search_ensembl_sorghum_bicolor
    - grm_search_ensembl_vitis_vinifera
    - grm_search_ensembl_zea_mays
    - grm_search_genes
    - grm_search_ontology
    - grm_search_qtl
    - grm_search_pathway_arabidopsis
    - grm_search_pathway_rice


list_columns:
  "diversity_*.cdv_marker": "name"

  "diversity_*.div_passport": "accename,accenumb,div_synonyms.synonym,cdv_source_id.source"

  "diversity_*.div_experiment": "name,design,originator,comments"

  "ensembl_*.dna_align_feature": "hit_name,analysis.logic_name"

  "ensembl_*.interpro": "id_field,interpro_ac[sprintf('Interpro accession &quot;%s&quot; in domain &quot;%s&quot;')]"

  "ensembl_*.marker": "type,display_marker_synonym.name"

  "ensembl_*.seq_region": "name"

  "ensembl_*.gene": "biotype,display_xref.display_label,stable_id,description[sprintf('%s gene &quot;%s&quot; [%s]: %s')]"

  "help.question": "question,answer[sprintf('&quot;%s&quot;: %s')]"

  "genes.gene_gene": "species.genus,species.species,symbol,accession,name[sprintf('%s %s gene &quot;%s&quot; (%s): %s')]"

  "genes.gene_germplasm": "species.genus,species.species,accession,wild_type"

  "literature.reference": "authors.contributor.contributor_name,title,source.source_name,year,volume,start_page,end_page[sprintf('%s, &quot;%s&quot;, <u>%s</u>, %s, vol. %s, pp. %s-%s')]"

  "germplasm.germplasm": "species.name,germplasm_acc"

  "maps.map_set": "species.species,map_type.map_type,map_set_name"

  "maps.feature": "species.species,feature_type.feature_type,feature_synonyms.feature_name"

  "maps.feature_type": "feature_type,description"

  "maps.germplasm": "species.species,germplasm_name,description"

  "maps.library": "species.species,library_name,center_name,center_project"

  "ontology.term": "term_type.term_type,name,term_accession"

  "pathway_*.pathway_gramene_search": "gene_name,enzyme_name,reaction_id,reaction_name,ec,pathway_id,pathway_name"

  "protein.gene_product": "gene_product_to_cultivars.cultivar.species.genus,gene_product_to_cultivars.cultivar.species.species,gene_product_helpers.swissprot_acc,gene_product_full_name[sprintf('%s %s protein &quot;%s&quot;: %s')]"

  "qtl.qtl": "species.species,qtl_accession_id,published_symbol,qtl_trait.qtl_trait_category.trait_category,qtl_trait.trait_symbol,qtl_trait.trait_name,qtl_trait.to_accession"

  "variation_oryza_sativa.variation": "name"
